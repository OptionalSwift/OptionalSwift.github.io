<!DOCTYPE html>
<html>

<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?94f6ddbfbc53cb18818538cafd3ba350";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

</script>


<head>
  <meta charset="utf-8">
  <script src="//dn-lbstatics.qbox.me/jquery/1.11.2/jquery.min.js"></script>
  <script src="//code.jquery.com/jquery-1.7.2.min.js"></script> 
  <script src="//dn-lbstatics.qbox.me/pintuer/1.0/pintuer.mini.js"></script>
  <script src="//dn-lbstatics.qbox.me/respond/1.4.2/respond.min.js"></script>
  
   
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
     
  
  <title>Sprite Kit框架 | Optional Swift 博客</title>
  <meta name="keywords" content="我是关键词优化 Sprite Kit框架 undefined" />
    <meta name="description" content="我是描述优化" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言：在实际游戏开发中，庞大的内容被切割成多个场景(SKScene)，而单个场景由各式节点组成，例如:SKLabelNode、SKSpriteNode、SKLightNode、SKVideoNode等，它们继承于SKNode这个“老父亲”，但自身又习出一身本领，专门从事某一方面工作。然而，SKSpriteNode这个“儿子”表现尤为突出，他是场景的基石(basic building blocks)">
<meta property="og:type" content="article">
<meta property="og:title" content="Sprite Kit框架">
<meta property="og:url" content="http://optionalswift.cn/2015/04/15/12.精灵进阶篇/index.html">
<meta property="og:site_name" content="Optional Swift 博客">
<meta property="og:description" content="前言：在实际游戏开发中，庞大的内容被切割成多个场景(SKScene)，而单个场景由各式节点组成，例如:SKLabelNode、SKSpriteNode、SKLightNode、SKVideoNode等，它们继承于SKNode这个“老父亲”，但自身又习出一身本领，专门从事某一方面工作。然而，SKSpriteNode这个“儿子”表现尤为突出，他是场景的基石(basic building blocks)">
<meta property="og:image" content="http://img.blog.csdn.net/20150324125132294">
<meta property="og:image" content="http://img.blog.csdn.net/20150324125150047">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sprite Kit框架">
<meta name="twitter:description" content="前言：在实际游戏开发中，庞大的内容被切割成多个场景(SKScene)，而单个场景由各式节点组成，例如:SKLabelNode、SKSpriteNode、SKLightNode、SKVideoNode等，它们继承于SKNode这个“老父亲”，但自身又习出一身本领，专门从事某一方面工作。然而，SKSpriteNode这个“儿子”表现尤为突出，他是场景的基石(basic building blocks)">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  <!--引用ICSCSS-->
  <link href="http://cdn.besdlab.cn/icecss/icecss.min.css" rel="stylesheet" type="text/css">
      <script src="http://cdn.besdlab.cn/jquery/2.1.1/jquery.2.1.1.min.js"></script>
      <script src="http://cdn.besdlab.cn/icecss/icecss.js"></script>
      <script src="http://cdn.besdlab.cn/icecss/plugin/ice_click.js"></script>
      <script>
      ice_click.init();
      </script>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <style>
.widget{
  background: none; 
 -webkit-box-shadow: none; 
box-shadow: none;
-webkit-border-radius:0px; 
border-radius: 0px; 
}
  .ice-main-nav{
    background: url("/img/ice-icon-menu.svg") no-repeat center center;
  }
 .ice-menu-logo a:hover{
    background: none;
  }

      @media only screen and (min-width: 768px) {
     .ice-main-nav {
         width: auto;
         height: auto;
         background: none;
         cursor: auto;
     }
   }
</style>
<header class="ice-menu ice-menu-hover">
<div class="ice-menu-logo" style="font-family:'Microsoft YaHei'">
 
     <a href="http://optionalswift.cn"><img src="/img/logo.png" style="height:100%"></a>
     <style>
       .ice-menu-logo{
    background: none;
  }</style>
     

</div>

<nav class="ice-main-nav">
<ul>

          <li><a href="/">首页</a></li>
        
          <li><a href="/archives">归档</a></li>
        
          <li><a href="/about">关于</a></li>
        
</ul>
</nav>
</header> 
      <div class="outer">
        <section id="main"><article id="post-12.精灵进阶篇" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/15/12.精灵进阶篇/" class="article-date">
  <time datetime="2015-04-15T07:30:16.000Z" itemprop="datePublished">2015-04-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/swift-language/">swift_language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Sprite Kit框架
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>前言：<br>在实际游戏开发中，庞大的内容被切割成多个场景(<strong>SKScene</strong>)，而单个场景由各式节点组成，例如:<strong>SKLabelNode</strong>、<strong>SKSpriteNode</strong>、<strong>SKLightNode</strong>、<strong>SKVideoNode</strong>等，它们继承于<strong>SKNode</strong>这个“老父亲”，但自身又习出一身本领，专门从事某一方面工作。然而，<strong>SKSpriteNode</strong>这个“儿子”表现尤为突出，他是场景的基石(<strong><code>basic building blocks</code></strong>)，构成了绝大部分，因此首先咱先来对它探究一二，至于其他节点，后文陆续给出。</p>
</blockquote>
<h3 id="01-正文">01.正文</h3><p>主角<strong><code>SKSpriteNode</code></strong>，不禁要问如何创建？回答是随性，你可以将其绘制为一个有纹理(何为纹理，点击<a href="http://blog.csdn.net/colouful987/article/details/43935859" target="_blank" rel="external">这里</a>)的长方形，也可以是一个上色、无纹理的长方形.想比较而言，纹理精灵较为常用，试想下，为了让内容更为生动、绚丽，我们会聘请设计师帮我们设计人物，背景等图片，游戏将其以纹理形式加载，我们就可以用它们来创建一个个有纹理的精灵，然后添加到场景中。</p>
<h2 id="02-创建一个有纹理的精灵">02.创建一个有纹理的精灵</h2><p>创建有纹理精灵的最简单方式是同时生成纹理(<code>texture</code>)和精灵(<code>sprite</code>)。首先你要将设计好的图片导入到app中，然后在应用运行时加载它们。下面提供代码例子：</p>
<pre><code>let spaceship = <span class="function"><span class="title">SKSpriteNode</span><span class="params">(imageNamed:<span class="string">"rocket"</span>)</span></span><span class="comment">//注 这里同时创建了rocket纹理和精灵</span>
spaceship<span class="class">.postion</span> = <span class="function"><span class="title">CGPointMake</span><span class="params">(<span class="number">100</span>,<span class="number">100</span>)</span></span>
self.<span class="function"><span class="title">addChild</span><span class="params">(spaceship)</span></span>
</code></pre><p>当以这种样式代码创建精灵时，尽管你只设置了纹理(如果还不理解，你可以将其理解成可复用的图片吧！)和位置属性，但是其他默认属性都将自动配置。如下：</p>
<ul>
<li>精灵所创建的<code>frame</code>属性一定于纹理的<code>size</code>属性相匹配，理解如下，<code>frame</code>无非就是一个明确了放置位置的矩形(100,100,200,300),放置在(100,100)这个点，宽度200,高度300。而纹理无非就是一张图片，所谓匹配就是，<code>frame</code>这个矩形刚刚能包裹住这个图片。粗浅理解。</li>
<li>精灵渲染时，以矩形区域为单位来渲染，也就是<code>frame</code>。此外精灵以<code>position</code>(上面代码)<font color="red" size="3">居中</font>,例如<code>position</code>设置为(400,400),而纹理的大小为(300,200)，那么<code>frame</code>的放置点应该这么计算，因为<code>postion</code>就是矩形的中心点，那么矩形左下角那个点就是(400-300/2,400-200/2)=(250,300),<code>frame</code>即(250,300,300,300)。</li>
<li>The sprite texture is alpha blended into the framebuffer.暂时不理解</li>
<li><strong>SKTexture</strong>对象从创建到附着于精灵上呈现到场景想必大家或多或少有点理解了。深入讨论纹理对象，当精灵放置于场景中时呈现时，纹理对象就会自动加载<code>texture data</code>；反之精灵被移除后，<strong><code>Sprite Kit</code></strong>自而然而就会删除<code>texture data</code>了。这不禁让人想到内存自动管理，貌似简化了不少，但这并不意味你就可以当一个甩手掌柜，你仍然需要手动来管理这些<code>asset</code>。</li>
</ul>
<h3 id="03-定制一个纹理精灵">03.定制一个纹理精灵</h3><p>我们能够修改每个精灵的属性来”私人定制”，看下面四个不同阶段的方式：</p>
<ul>
<li>使用锚点(<code>Anchor</code>)来移动精灵的框架(<code>Frame</code>)。</li>
<li>调整精灵的大小。有时候我们将纹理应用到精灵上时却发现纹理太大了，这时候我们需要调整精灵的大小了。</li>
<li>给纹理着色后附着到精灵上。</li>
<li>使用其他混合模式将精灵中的内容与帧缓存中的内容相联系。</li>
</ul>
<p>通常来说，我们配置一个精灵就是执行以上四个阶段，放置位置、调整大小、着色和混合，当然这些都是基于纹理精灵来说的。</p>
<h3 id="04-使用锚点来移动精灵的位置">04.使用锚点来移动精灵的位置</h3><p>默认来说，精灵的<code>frame</code>以及<code>texture</code>，将被居中放置到<code>positon</code>上，有点拗口，不过换种说法就是，放置一个点(300,300)到场景中，现在有一个矩形200*200，它的中心点和先前放置的点(300,300)重合，这样就理解了何为居中。如此一来纹理总能将中心位置处的“最美一面”呈现给大家，然而有时候，我们可能希望将纹理其他部分的图片放置于节点的<code>position</code>上。  </p>
<p>精灵节点中有一个属性叫做<code>anchorPoint</code>，称之为锚点或者定位点。它的作用是决定将<code>frame</code>(看做是一个矩形区域)中的某一个点放置到精灵的<code>position</code>上。锚点是在<font size="3" color="red">单位坐标系</font>中明确指定，请看下图。单位坐标系的原点被放置在(0,0)，与之相对的(1,1)被放置于右上角，<font size="3" color="red">注：在单位坐标系，范围只有0-1</font>。默认情况下，精灵的锚点是(0.5,0.5)，即<code>frame</code>的中心点。</p>
<p><img src="http://img.blog.csdn.net/20150324125132294" alt="这里写图片描述"></p>
<p>如何修改一个精灵的锚点呢？  </p>
<pre><code><span class="comment">//切记锚点是在单位坐标系中决定，范围0-1</span>
rocket<span class="class">.anchorPoint</span> = <span class="function"><span class="title">CGPointMake</span><span class="params">(<span class="number">0.5</span>,<span class="number">1.0</span>)</span></span>
</code></pre><p>如下图：</p>
<p><img src="http://img.blog.csdn.net/20150324125150047" alt="这里写图片描述"></p>
<h3 id="05-调整精灵的大小">05.调整精灵的大小</h3><p>精灵的<code>frame</code>属性由其他三种属性的值决定：        </p>
<ul>
<li>精灵的<strong>size</strong>属性持有<code>sprite</code>的基本尺寸(也就是未经过放缩的)。前文提到过一个初始化精灵实例的方法，如此精灵的属性值就等于精灵纹理的尺寸！</li>
<li><code>sprite</code>的基本尺寸是能够调整大小的，通过设定<code>xScale</code>和<code>yScale</code>属性值即可，它们都是<strong><code>SKNode</code></strong>的家伙，而<strong><code>SKSpriteNode</code></strong>继承自它，自然也有这属性喽！  </li>
</ul>
<p>举例来说，如果一个精灵的基本属性为32x32像素，如果设定<code>xScale</code>值为1.0，<code>yScale</code>值为2.0,那么<code>frame</code>就变成了32x64，灰常简单。</p>
<h3 id="06-给精灵着色">06.给精灵着色</h3><p>使用<code>color</code>和<code>colorBlendFactor</code>属性给纹理上色，之后将纹理附着到精灵上。默认的<code>colorBlendFator</code>是等于0.0(最高1.0),意味着纹理是未经上色的。你尝试慢慢增加这个数值，从0.0、0.1、0.3慢慢增加，你会发现你设置的<code>color</code>会越来越”浓郁”！  </p>
<pre><code><span class="comment">//步骤一：设置颜色</span>
monsterSprite<span class="class">.color</span> = SKColor.<span class="function"><span class="title">redColor</span><span class="params">()</span></span>
<span class="comment">//步骤二：设置混合属性</span>
monsterSprite<span class="class">.colorBlendFator</span> = <span class="number">0.5</span>
</code></pre><p>貌似不是很给力，我们来做一个渐变色的动画吧！</p>
<pre><code><span class="tag">var</span> pulseRed = SKAction.sequence([
    <span class="comment">//在0.15秒钟慢慢着色到1.0程度！</span>
    SKAction.<span class="function"><span class="title">colorizeWithColor</span><span class="params">(SKColor.redColor()</span></span>, 
                colorBlendFactor: <span class="number">1.0</span>, duration: <span class="number">0.15</span>)
    SKAction.<span class="function"><span class="title">waitForDuraton</span><span class="params">(<span class="number">0.1</span>)</span></span>
    SKAction.<span class="function"><span class="title">colorizeWithColorBlendFactor</span><span class="params">(<span class="number">0.0</span>,duration:<span class="number">0.15</span>)</span></span>
])
monsterSprite.<span class="function"><span class="title">runAction</span><span class="params">(pulseRed)</span></span>
</code></pre><h3 id="07-Blending_The_Sprite_into_the_Framebuffer">07.Blending The Sprite into the Framebuffer</h3><p>暂时理解是两个纹理之间的混合，至于混合程度设定由<code>alpha value</code>决定。设定额外的混合模式来模拟灯光代码如下：</p>
<pre><code>lightFlareSprite<span class="class">.blendMode</span> = SKBlendModeAdd
</code></pre><p>这里我很抱歉，暂时理解不是很清楚，以后补上！</p>

      
    </div>
    <footer class="article-footer">
     
      <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>


      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift-spriteKit/">swift_spriteKit</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/04/12/在_swift_中使用百度地图_sdk/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">在 swift 中使用百度地图SDK</div>
    </a>
  
</nav>

  
</article>
  
  <section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-12.精灵进阶篇" data-title="Sprite Kit框架" data-url="http://optionalswift.cn/2015/04/15/12.精灵进阶篇/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'optionalswift'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  </section>
  </section>
        
          <aside id="sidebar">

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">文章分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/swift-Control/">swift_Control</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/swift-Kit/">swift_Kit</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/swift-language/">swift_language</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">关键字</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift-spriteKit/">swift_spriteKit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift-控件/">swift_控件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift-视图/">swift_视图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift基础入门/">swift基础入门</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift框架/">swift框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift语法/">swift语法</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">云标签</h3>
    <div class="widget tagcloud">
      <a href="/tags/swift-spriteKit/" style="font-size: 10px;">swift_spriteKit</a><a href="/tags/swift-控件/" style="font-size: 10px;">swift_控件</a><a href="/tags/swift-视图/" style="font-size: 10px;">swift_视图</a><a href="/tags/swift基础入门/" style="font-size: 15px;">swift基础入门</a><a href="/tags/swift框架/" style="font-size: 10px;">swift框架</a><a href="/tags/swift语法/" style="font-size: 20px;">swift语法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">时间胶囊</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最近发表</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/04/15/12.精灵进阶篇/">Sprite Kit框架</a>
          </li>
        
          <li>
            <a href="/2015/04/12/在_swift_中使用百度地图_sdk/">在 swift 中使用百度地图SDK</a>
          </li>
        
          <li>
            <a href="/2015/04/12/swift_可展开可收缩的表视图/">swift 可展开可收缩的表视图</a>
          </li>
        
          <li>
            <a href="/2015/04/11/A Swift Tour/">A Swift Tour </a>
          </li>
        
          <li>
            <a href="/2015/04/01/Optional<T>可选类型浅谈/">Optional&lt;T&gt;可选类型浅谈</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">团队成员</h3>
    <div class="widget">
    <ul>
     
          <li><a href="http://blog.csdn.net/colouful987">PMST</a></li>
        
          <li><a href="http://www.jianshu.com/users/ef1058d2d851/latest_articles">星夜暮晨</a></li>
        
          <li><a href="http://blog.csdn.net/colouful987">JIM</a></li>
        
          <li><a href="http://blog.csdn.net/colouful987">iceAna</a></li>
        
        </ul>
    </div>
  </div>

  

</aside>


        
      </div>
      <footer style="color:#fff;">
  
  <div class="ice-div ice-div-1-1" style="height:100px;background: #2c3d4f;line-height:100px;text-align:center">
  	&copy; 2013 - 2015 Powered by <a href="http://hexo.io/">Optional Swift Team</a>
  	|
  	Team was set up in April
	 <font id="counter"></font>
  </div>
</footer>
<script src="//buru.u.qiniudn.com/firebase-2.0.5.js"></script>
<!--script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script-->
<script src="/js/counter.js"></script>

    </div>
    

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>